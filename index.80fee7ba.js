var t=Object.freeze({luckyLottoContainer:"lucky-lotto-container",lottoAnswerInput:"lotto-answer-input",purchaseInput:"purchase-input",purchasedLotto:"purchased-lotto",purchasedLottoAmountLabel:"purchased-lotto-amount-label",benefitRateLabel:"benefit-rate-label",toggleButton:"TOGGLE_BUTTON"}),e=Object.freeze({purchase:"PURCHASE",toggleMyLotto:"TOGGLE_MY_LOTTO",checkMyLottoResult:"CHECK_MY_LOTTO_RESULT",resetGame:"RESET_GAME"}),n=Object.freeze({baseLottoNumbers:"BASE_LOTTO_NUMBERS",bonusLottoNumber:"BONUS_LOTTO_NUMBER"}),o=Object.freeze({displayNone:"d-none"}),a=Object.freeze({purchaseInput:"PURCHASE_INPUT",purchaseButton:"PURCHASE_BUTTON",lottoCountLabel:"LOTTO_COUNT_LABEL",toggleButton:"TOGGLE_BUTTON",lottoDetail:"LOTTO_DETAIL",resultLottoRankLabel:"RESULT_LOTTO_RANK_LABEL",resultLottoBenefitRateLabel:"RESULT_LOTTO_BENEFIT_RATE_LABEL",benefitRateButton:"BENEFIT_RATE_BUTTON",baseLottoInput:"BASE_LOTTO_INPUT",bonusLottoInput:"BONUS_LOTTO_INPUT",resetGameButton:"RESET_GAME_BUTTON"}),r=Object.freeze({price:1e3,maxLottoNumber:45,lottoNumberCount:7,maxMyLottoLimit:10});class s extends class{constructor(t){this.$target=t,this.setup(),this.setEvent(),this.render()}setup(){}template(){return""}setEvent(){}render(){this.$target.innerHTML=this.template()}}{template(){return'\n            <h1 class="text-center">🎱 행운의 로또</h1>\n            <form class="mt-5" onsubmit="document.querySelector(\'button[data-event=PURCHASE]\').click(); return false;">\n                <label class="mb-2 d-inline-block">구입할 금액을 입력해주세요.</label>\n                <div class="d-flex">\n                    <input\n                        id="'.concat(t.purchaseInput,'"\n                        type="number"\n                        class="w-100 mr-2 pl-2"\n                        placeholder="구입 금액"\n                        data-test-element="').concat(a.purchaseInput,'"\n                    />\n                    <button type="button" class="btn btn-cyan" data-event="').concat(e.purchase,'" data-test-element="').concat(a.purchaseButton,'">확인</button>\n                </div>\n            </form>\n            <section class="mt-9 ').concat(o.displayNone,'" id="').concat(t.purchasedLotto,'">\n                <div class="d-flex">\n                <label class="flex-auto my-0" id="').concat(t.purchasedLottoAmountLabel,'" data-test-element="').concat(a.lottoCountLabel,'"></label>\n                <div class="flex-auto d-flex justify-end pr-1">\n                    <label class="switch">\n                    <input type="checkbox" class="lotto-numbers-toggle-button" data-event="').concat(e.toggleMyLotto,'" id="').concat(t.toggleButton,'" data-test-element="').concat(a.toggleButton,'" />\n                    <span class="text-base font-normal">번호보기</span>\n                    </label>\n                </div>\n                </div>\n                <div class="d-flex flex-wrap" id="').concat(t.purchasedLottoViewer,'"></div>\n            </section>\n            <form class="mt-9 ').concat(o.displayNone,'" id="').concat(t.lottoAnswerInput,'">\n            <label class="flex-auto d-inline-block mb-3"\n                >지난 주 당첨번호 6개와 보너스 넘버 1개를 입력해주세요.</label\n            >\n            <div class="d-flex" onsubmit="event.preventDefault(); document.querySelector(\'button[data-event=CHECK_MY_LOTTO_RESULT]\').click(); return false;">\n                <div>\n                <h4 class="mt-0 mb-3 text-center">당첨 번호</h4>\n                <div>\n                    <input\n                    data-test-element="').concat(a.baseLottoInput,'"\n                    name="').concat(n.baseLottoNumbers,'"\n                    type="number"\n                    class="winning-number mx-1 text-center"/>\n                    <input\n                    data-test-element="').concat(a.baseLottoInput,'"\n                    name="').concat(n.baseLottoNumbers,'"\n                    type="number"\n                    class="winning-number mx-1 text-center"/>\n                    <input\n                    data-test-element="').concat(a.baseLottoInput,'"\n                    name="').concat(n.baseLottoNumbers,'"\n                    type="number"\n                    class="winning-number mx-1 text-center"/>\n                    <input\n                    data-test-element="').concat(a.baseLottoInput,'"\n                    name="').concat(n.baseLottoNumbers,'"\n                    type="number"\n                    class="winning-number mx-1 text-center"/>\n                    <input\n                    data-test-element="').concat(a.baseLottoInput,'"\n                    name="').concat(n.baseLottoNumbers,'"\n                    type="number"\n                    class="winning-number mx-1 text-center"/>\n                    <input\n                    data-test-element="').concat(a.baseLottoInput,'"\n                    name="').concat(n.baseLottoNumbers,'"\n                    type="number"\n                    class="winning-number mx-1 text-center"/>\n                </div>\n                </div>\n                <div class="bonus-number-container flex-grow">\n                <h4 class="mt-0 mb-3 text-center">보너스 번호</h4>\n                <div class="d-flex justify-center">\n                    <input type="number" class="bonus-number text-center" \n                    data-test-element="').concat(a.bonusLottoInput,'" name="').concat(n.bonusLottoNumber,'"\n                     />\n                </div>\n                </div>\n            </div>\n            <button\n                type="button"\n                class="open-result-modal-button mt-5 btn btn-cyan w-100"\n                data-event="').concat(e.checkMyLottoResult,'"\n                data-test-element="').concat(a.benefitRateButton,'"\n            >\n                결과 확인하기!\n            </button>\n            </form>\n        ')}}var c=Object.freeze({onClick:"click"}),l=Object.freeze({myLottoLimitError:"로또는 ".concat(r.maxMyLottoLimit,"개 까지 구매할 수 있습니다."),lottoNumberOutOfRangeError:"로또 번호는 1번부터 ".concat(r.maxLottoNumber,"까지 입력 할 수 있습니다."),lottoNumberDuplicateError:"중복된 로또 번호가 있습니다."}),u=Object.freeze({fisrt:2e9,second:3e7,third:15e5,fourth:5e4,fifth:5e3}),i=Object.freeze({FIRST:6,SECOND:55,THIRD:5,FOURTH:4,FIFTH:5});function m(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function d(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,p(t,e,"get"))}function b(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,p(t,e,"set"),n),n}function p(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var L={[i.FIFTH]:u.fifth,[i.FOURTH]:u.fourth,[i.THIRD]:u.third,[i.SECOND]:u.second,[i.FIRST]:u.fisrt},h=new WeakMap,f=new WeakMap,v=new WeakMap;class T{constructor(){m(this,h,{writable:!0,value:void 0}),m(this,f,{writable:!0,value:void 0}),m(this,v,{writable:!0,value:void 0}),this.initService()}initService(){b(this,f,r.price||1e3),b(this,h,[]),b(this,v,{base:[],bonus:0})}autoPurchase(t,e){this.initService();for(var n=0;n<t;n+=1)this.generateLottoNumber(e?e[n]:null)}generateLottoNumber(t){d(this,h).push(this.getLottoNumbers(t))}getLottoNumbers(t){if(t)return t.slice(0,6);for(var e,n,o=new Set;o.size!==r.lottoNumberCount-1;){var a=Math.floor((e=1,n=r.maxLottoNumber+1,Math.random()*(n-e)+e));o.has(a)||o.add(a)}return Array.from(o)}calcLottoBenefit(){var t=new Map;d(this,h).forEach((e=>{var n=new Set,o=0;e.forEach((t=>{n.add(t)})),d(this,v).base.forEach((t=>{n.has(t)&&(o+=1)})),5===o&&e.includes(d(this,v).bonus)?t.set(i.SECOND,(t.get(i.SECOND)||0)+1):L[o]&&t.set(o,(t.get(o)||0)+1)}));var e=0,n={};return t.forEach(((t,o)=>{e+=L[o]*t,n[o]=t})),{benefitRate:Math.floor(e/(d(this,h).length*r.price)*100-100),rank:n}}set lottoAnswer(t){b(this,v,t)}get myLottos(){return d(this,h)}get lottoPrice(){return d(this,f)}}var E=t=>document.querySelector(t);function y(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function N(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,w(t,e,"get"))}function g(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,w(t,e,"set"),n),n}function w(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var O={[e.purchase]:e=>function(e){var n=Number(E("#"+t.purchaseInput).value);if(0===n||n%e.lottoPrice!=0)return void alert(e.lottoPrice+"원 단위로 입력해주세요.");var o=n/e.lottoPrice;if(o>r.maxMyLottoLimit)return alert(l.myLottoLimitError),void(E("#"+t.purchaseInput).value="");e.autoPurchase(o),I(!0),s=e.myLottos,c=t=>'\n      <li class="mx-1 text-4xl lotto-wrapper">\n      <span class="lotto-icon">🎟️ </span>\n      <span class="lotto-detail" style="display: none;" data-test-element="'.concat(a.lottoDetail,'"">').concat(t.reduce(((t,e)=>t+", "+e)),"</span>\n      </li>\n    "),E("#"+t.purchasedLottoViewer).innerHTML="".concat(s.map((t=>c(t))).join("")),E("#"+t.purchasedLottoAmountLabel).innerText="총 ".concat(s.length,"개를 구매하였습니다."),E("#"+t.purchasedLottoAmountLabel).dataset.count=s.length;var s,c}(e),[e.checkMyLottoResult]:e=>function(e){var o=E("#"+t.lottoAnswerInput),a=new FormData(o),r=a.getAll(n.baseLottoNumbers).map((t=>Number(t))),s=Number(a.get(n.bonusLottoNumber)),c=function(t,e){var n=new Set;if(!_(e))return{error:!0,message:l.lottoNumberOutOfRangeError};for(var o of(n.add(e),t)){if(!_(o)||n.has(o))return{error:!0,message:l.lottoNumberDuplicateError};n.add(o)}return{error:!1}}(r,s);if(c.error)return void alert(c.message);e.lottoAnswer={base:r,bonus:s};var u=e.calcLottoBenefit();document.querySelectorAll("td[data-rank-label]").forEach((t=>{var e=u.rank[Number(t.dataset.rankLabel)]||0;t.innerText=e+"개"})),E("#"+t.benefitRateLabel).innerText="당신의 총 수익률은 ".concat(u.benefitRate,"%입니다."),E(".modal").classList.add("open")}(e),[e.toggleMyLotto]:()=>{R(E("#"+t.toggleButton).checked)},[e.resetGame]:e=>function(e){e.initService(),o=document.querySelector(".modal"),a=E("#"+t.toggleButton),r=E("#"+t.purchaseInput),s=a.checked,I(!1),o.classList.remove("open"),r.value="",r.focus(),document.getElementsByName(n.baseLottoNumbers).forEach((t=>t.value="")),document.getElementsByName(n.bonusLottoNumber).forEach((t=>t.value="")),E("#"+t.purchasedLottoAmountLabel).innerText="총 0개를 구매하였습니다.",E("#"+t.purchasedLottoViewer).innerHTML="",a.checked&&(R(s),a.checked=!1);var o,a,r,s}(e)},x=new WeakMap,S=new WeakMap;function _(t){return!(t<=0||t>r.maxLottoNumber)}function R(t){document.querySelectorAll(".lotto-detail").forEach((e=>{e.style.display=t?"":"none"}))}function I(e){if(e)return E("#"+t.purchasedLotto).classList.remove(o.displayNone),void E("#"+t.lottoAnswerInput).classList.remove(o.displayNone);E("#"+t.purchasedLotto).classList.add(o.displayNone),E("#"+t.lottoAnswerInput).classList.add(o.displayNone)}new class{constructor(){y(this,x,{writable:!0,value:void 0}),y(this,S,{writable:!0,value:void 0}),g(this,x,E("#"+t.luckyLottoContainer)),g(this,S,new T),new s(N(this,x)),this.setEvent()}setEvent(){N(this,x).addEventListener(c.onClick,(t=>{var e=t.target.dataset.event;e&&O[e](N(this,S))})),E(".modal").addEventListener(c.onClick,(t=>{var n=t.target.dataset.event;n&&n===e.resetGame&&O[n](N(this,S))}))}};var B=document.querySelector(".modal-close"),A=document.querySelector(".modal");B.addEventListener("click",(()=>{A.classList.remove("open")}));
//# sourceMappingURL=index.80fee7ba.js.map
